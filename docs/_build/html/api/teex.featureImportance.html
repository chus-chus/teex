<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>teex.featureImportance package &mdash; teex 1.0.4 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="teex.saliencyMap package" href="teex.saliencyMap.html" />
    <link rel="prev" title="teex.decisionRule package" href="teex.decisionRule.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> teex
            <img src="../_static/rsz_teex_logo__.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../demos/examples.html">Notebook demos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="teex.html">teex package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="teex.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="teex.decisionRule.html">teex.decisionRule package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">teex.featureImportance package</a></li>
<li class="toctree-l4"><a class="reference internal" href="teex.saliencyMap.html">teex.saliencyMap package</a></li>
<li class="toctree-l4"><a class="reference internal" href="teex.wordImportance.html">teex.wordImportance package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="teex.html#module-teex">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">teex</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">API reference</a> &raquo;</li>
          <li><a href="teex.html">teex package</a> &raquo;</li>
      <li>teex.featureImportance package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/teex.featureImportance.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="teex-featureimportance-package">
<h1>teex.featureImportance package<a class="headerlink" href="#teex-featureimportance-package" title="Permalink to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-teex.featureImportance.data">
<span id="teex-featureimportance-data-module"></span><h2>teex.featureImportance.data module<a class="headerlink" href="#module-teex.featureImportance.data" title="Permalink to this heading"></a></h2>
<p>Module for synthetic and real datasets with available ground truth feature importance explanations. Also contains
methods and classes for decisionRule data manipulation.</p>
<p>All of the datasets must be instanced first. Then, when sliced, they all return the observations, labels and ground
truth explanations, respectively.</p>
<dl class="py class">
<dt class="sig sig-object py" id="teex.featureImportance.data.SenecaFI">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">teex.featureImportance.data.</span></span><span class="sig-name descname"><span class="pre">SenecaFI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nSamples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nFeatures</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">featureNames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">randomState</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">888</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#SenecaFI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.SenecaFI" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_SyntheticDataset</span></code></p>
<p>Generate synthetic binary classification tabular data with ground truth feature importance explanations. This
method was presented in [Evaluating local explanation methods on ground truth, Riccardo Guidotti, 2021].</p>
<p>From this class one can also obtain a trained transparent model (instance of <a class="reference internal" href="#teex.featureImportance.data.TransparentLinearClassifier" title="teex.featureImportance.data.TransparentLinearClassifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransparentLinearClassifier</span></code></a>).
When sliced, this object will return</p>
<blockquote>
<div><ul class="simple">
<li><p>X (ndarray) of shape (nSamples, nFeatures) or (nFeatures). Generated data.</p></li>
<li><p>y (ndarray) of shape (nSamples,) or int. Generated binary data labels.</p></li>
<li><p>explanations (ndarray) of shape (nSamples, nFeatures) or (nFeatures). Generated g.t. feature importance
explanations. For each explanation, the values are normalised to the [-1, 1] range.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nSamples</strong> – (int) number of samples to be generated.</p></li>
<li><p><strong>nFeatures</strong> – (int) total number of features in the generated data.</p></li>
<li><p><strong>featureNames</strong> – (array-like) names of the generated features. If not provided, a list with the generated
feature names will be returned by the function.</p></li>
<li><p><strong>randomState</strong> – (int) random state seed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="teex.featureImportance.data.TransparentLinearClassifier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">teex.featureImportance.data.</span></span><span class="sig-name descname"><span class="pre">TransparentLinearClassifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">randomState</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">888</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#TransparentLinearClassifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.TransparentLinearClassifier" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_BaseClassifier</span></code></p>
<p>Used on the higher level data generation class <a class="reference internal" href="#teex.featureImportance.data.SenecaFI" title="teex.featureImportance.data.SenecaFI"><code class="xref py py-class docutils literal notranslate"><span class="pre">SenecaFI</span></code></a> (<strong>use that and get it from there
preferably</strong>).</p>
<p>Transparent, linear classifier with feature importances as explanations. This class also generates labeled
data according to the generated random linear expression. Presented in [Evaluating local explanation methods on
ground truth, Riccardo Guidotti, 2021].</p>
<dl class="py method">
<dt class="sig sig-object py" id="teex.featureImportance.data.TransparentLinearClassifier.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newLabels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#TransparentLinearClassifier.explain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.TransparentLinearClassifier.explain" title="Permalink to this definition"></a></dt>
<dd><p>Get feature importance explanation as the gradient of the expression evaluated at the point (from the
n ‘training’ observations) with the same class as ‘obs’ and closest to the decision boundary f = 0.</p>
<p>The procedure is as follows: for each data observation x to explain, get the observation z from the ‘training’
data that is closer to the decision boundary and is of different class than x. Then, get the observation t from
the ‘training’ data that is closer to z but of the same class as x. Finally, return the explanation for x as the
gradient vector of f evaluated at t.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – (ndarray) array of k observations and m features, shape (k, m).</p></li>
<li><p><strong>newLabels</strong> – (ndarray, optional) precomputed data labels (binary ints) for ‘data’. Shape (k).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ndarray) (k, m) array of feature importance explanations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="teex.featureImportance.data.TransparentLinearClassifier.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nFeatures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">featureNames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nSamples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#TransparentLinearClassifier.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.TransparentLinearClassifier.fit" title="Permalink to this definition"></a></dt>
<dd><p>Generates a random linear expression and random data labeled by the linear expression as a binary
dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nFeatures</strong> – (int) number of features in the data.</p></li>
<li><p><strong>featureNames</strong> – (array-like) names of the features in the data.</p></li>
<li><p><strong>nSamples</strong> – (int) number of samples for the generated data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ndarray, ndarray) data of shape (n, m) and their respective labels of shape (n)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="teex.featureImportance.data.TransparentLinearClassifier.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#TransparentLinearClassifier.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.TransparentLinearClassifier.predict" title="Permalink to this definition"></a></dt>
<dd><p>Predicts label for observations. Class 1 if f(x) &gt; 0 and 0 otherwise where x is a point to label and f()
is the generated classification expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (ndarray) observations to label, shape (k, m).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ndarray) array of length n with binary labels.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="teex.featureImportance.data.TransparentLinearClassifier.predict_proba">
<span class="sig-name descname"><span class="pre">predict_proba</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#TransparentLinearClassifier.predict_proba"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.TransparentLinearClassifier.predict_proba" title="Permalink to this definition"></a></dt>
<dd><p>Get class probabilities by evaluating the expression f at ‘data’, normalizing the result and
setting the probabilities as 1 - norm(f(data)), norm(f(data)).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (ndarray) observations for which to obtain probabilities, shape (k, m).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ndarray) array of shape (n, 2) with predicted class probabilities.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="teex.featureImportance.data.lime_to_feature_importance">
<span class="sig-prename descclassname"><span class="pre">teex.featureImportance.data.</span></span><span class="sig-name descname"><span class="pre">lime_to_feature_importance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nFeatures</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#lime_to_feature_importance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.lime_to_feature_importance" title="Permalink to this definition"></a></dt>
<dd><p>Convert from a <code class="docutils literal notranslate"><span class="pre">lime.explanation.Explanation</span></code> object to a np.array feature importance vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exp</strong> (<em>lime.explanation.Explanation</em>) – explanation to convert to vector.</p></li>
<li><p><strong>label</strong> – (int, str) label of lime explanation. If lime explanations are generated by default, then it will be
1.</p></li>
<li><p><strong>nFeatures</strong> (<em>int</em>) – number of features in the explanation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>feature importance vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="teex.featureImportance.data.scale_fi_bounds">
<span class="sig-prename descclassname"><span class="pre">teex.featureImportance.data.</span></span><span class="sig-name descname"><span class="pre">scale_fi_bounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/data.html#scale_fi_bounds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.data.scale_fi_bounds" title="Permalink to this definition"></a></dt>
<dd><p>Map values of an 1D or 2D np.ndarray on certain conditions. The mapping is on a by-column basis. That is, each
column will be separately scaled.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(for each column in ``x``)
if values in the range [-1, 1] or [0, 1]       -&gt; do nothing
else:
    case 1: if values in the [0, inf] range    -&gt; map to [0, 1]
    case 2: if values in the [-inf, 0] range   -&gt; map to [-1, 1]
    case 3: if values in the [-inf, inf] range -&gt; map to [-1, 1] 
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-teex.featureImportance.eval">
<span id="teex-featureimportance-eval-module"></span><h2>teex.featureImportance.eval module<a class="headerlink" href="#module-teex.featureImportance.eval" title="Permalink to this heading"></a></h2>
<p>Module for evaluation of feature importance explanations.</p>
<dl class="py function">
<dt class="sig sig-object py" id="teex.featureImportance.eval.cosine_similarity">
<span class="sig-prename descclassname"><span class="pre">teex.featureImportance.eval.</span></span><span class="sig-name descname"><span class="pre">cosine_similarity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'abs'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="../_modules/teex/featureImportance/eval.html#cosine_similarity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.eval.cosine_similarity" title="Permalink to this definition"></a></dt>
<dd><p>Computes cosine similarity between two real valued arrays. If negative, returns 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>u</strong> – (array-like), real valued array of dimension n.</p></li>
<li><p><strong>v</strong> – (array-like), real valued array of dimension n.</p></li>
<li><p><strong>bounding</strong> (<em>str</em>) – if the CS is &lt; 0, bound it in [0, 1] via absolute val (‘abs’) or max(0, val) (‘max’)</p></li>
</ul>
</dd>
<dt class="field-even">Return float</dt>
<dd class="field-even"><p>(0, 1) cosine similarity.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="teex.featureImportance.eval.feature_importance_scores">
<span class="sig-prename descclassname"><span class="pre">teex.featureImportance.eval.</span></span><span class="sig-name descname"><span class="pre">feature_importance_scores</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metrics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">average</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholdType</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'abs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binThreshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/teex/featureImportance/eval.html#feature_importance_scores"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#teex.featureImportance.eval.feature_importance_scores" title="Permalink to this definition"></a></dt>
<dd><p>Computes quality metrics between one or more feature importance vectors. The values in the vectors must be
bounded in [0, 1] or [-1, 1] (to indicate negative importances in the second case). If they are not, the values will
be mapped.</p>
<p>For the computation of the precision, recall and FScore, the vectors are binarized to simulate a classification
setting depending on the param. <code class="code docutils literal notranslate"><span class="pre">thresholdType</span></code>. In the case of ROC AUC, the ground truth feature importance
vector will be binarized as in the case of ‘precision’, ‘recall’ and ‘FScore’ and the predicted feature importance
vector entries will be considered as prediction scores. If the predicted vectors contain negative values, these will
be either mapped to 0 or taken their absolute val (depending on the chosen option in the param.
<code class="code docutils literal notranslate"><span class="pre">thresholdType</span></code>).</p>
<p><strong>Edge cases</strong>: Edge cases for when metrics are not defined have been accounted for:</p>
<blockquote>
<div><ul class="simple">
<li><p>When computing classification scores (‘fscore’, ‘prec’, ‘rec’), if there is only one class in the
ground truth and / or the prediction, one random feature will be flipped (same feature in both).
Note that some metrics such as ‘auc’ may still be undefined in this case if there is only 1 feature per data
observation.</p></li>
<li><p>For ‘auc’, although the ground truth is binarized, the prediction vector represents scores, and so, if both
contain only one value, only in the ground truth a feature will be flipped. In the prediction, a small amount
(<span class="math notranslate nohighlight">\(1^{-4}\)</span>) will be summed to a random feature if no value is != 0.</p></li>
<li><p>When computing cosine similarity, if there is no value != 0 in the ground truth and / or prediction, one
random feature will be summed 1e-4.</p></li>
</ul>
</div></blockquote>
<p><strong>On vector ranges</strong>: If the ground truth array or the predicted array have values that are not bounded in
<span class="math notranslate nohighlight">\([-1, 1]\)</span> or <span class="math notranslate nohighlight">\([0, 1]\)</span>, they will be mapped accordingly. Note that if the values lie within
<span class="math notranslate nohighlight">\([-1, 1]\)</span> or <span class="math notranslate nohighlight">\([0, 1]\)</span> no mapping will be performed, so it is assumed that the scores represent feature
importances in those ranges. These are the cases considered for the mapping:</p>
<blockquote>
<div><ul class="simple">
<li><p>if values in the <span class="math notranslate nohighlight">\([0, \infty]\)</span> range: map to <span class="math notranslate nohighlight">\([0, 1]\)</span></p></li>
<li><p>if values in the <span class="math notranslate nohighlight">\([-\infty, 0]\)</span> range: map to <span class="math notranslate nohighlight">\([-1, 1]\)</span></p></li>
<li><p>if values in the <span class="math notranslate nohighlight">\([-\infty, \infty]\)</span> range: map to <span class="math notranslate nohighlight">\([-1, 1]\)</span></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gts</strong> (<em>np.ndarray</em>) – (1d np.ndarray or 2d np.ndarray of shape (n_features, n_samples)) ground truth feature
importance vectors.</p></li>
<li><p><strong>preds</strong> (<em>np.ndarray</em>) – (1d np.ndarray or 2d np.ndarray of shape (n_features, n_samples)) predicted feature
importance vectors.</p></li>
<li><p><strong>metrics</strong> – <p>(str or array-like of str) metric/s to be computed. Available metrics are</p>
<blockquote>
<div><ul>
<li><p>’fscore’: Computes the F1 Score between the ground truths and the predicted vectors.</p></li>
<li><p>’prec’: Computes the Precision Score between the ground truths and the predicted vectors.</p></li>
<li><p>’rec’: Computes the Recall Score between the ground truths and the predicted vectors.</p></li>
<li><p>’auc’: Computes the ROC AUC Score between the ground truths and the predicted vectors.</p></li>
<li><p>’cs’: Computes the Cosine Similarity between the ground truths and the predicted vectors.</p></li>
</ul>
</div></blockquote>
<p>The vectors are automatically binarized for computing recall, precision and fscore.</p>
</p></li>
<li><p><strong>average</strong> (<em>bool</em>) – (default <code class="code docutils literal notranslate"><span class="pre">True</span></code>) Used only if <code class="code docutils literal notranslate"><span class="pre">gt</span></code> and <code class="code docutils literal notranslate"><span class="pre">rule</span></code> contain multiple
observations. Should the computed metrics be averaged across all the samples?</p></li>
<li><p><strong>thresholdType</strong> (<em>str</em>) – <p>Options for the binarization of the features for the computation of ‘fscore’, ‘prec’,
‘rec’ and ‘auc’.</p>
<blockquote>
<div><ul>
<li><p>’abs’: features with absolute val &lt;= <code class="code docutils literal notranslate"><span class="pre">binThreshold</span></code> will be set to 0 and 1 otherwise. For the
predicted feature importances in the case of ‘auc’, their absolute val will be taken.</p></li>
<li><p>’thres’: features &lt;= <code class="code docutils literal notranslate"><span class="pre">binThreshold</span></code> will be set to 0, 1 otherwise. For the <cite>predicted</cite> feature
importances in the case of ‘auc’, negative values will be cast to 0 and the others left <em>as-is</em>.</p></li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>binThreshold</strong> (<em>float</em>) – (in [-1, 1]) Threshold for the binarization of the features for the computation of ‘fscore’, ‘prec’, ‘rec’ and
‘auc’. The binarization depends on both this parameter and <code class="code docutils literal notranslate"><span class="pre">thresholdType</span></code>.
If <code class="code docutils literal notranslate"><span class="pre">thresholdType</span> <span class="pre">=</span> <span class="pre">'abs'</span></code>, <code class="docutils literal notranslate"><span class="pre">binThreshold</span></code> cannot be negative.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Verbosity of warnings. <code class="docutils literal notranslate"><span class="pre">True</span></code> will report warnings, <code class="docutils literal notranslate"><span class="pre">`False`</span></code> will not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(ndarray of shape (n_metrics,) or (n_samples, n_metrics)) specified metric/s in the indicated order.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-teex.featureImportance">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-teex.featureImportance" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="teex.decisionRule.html" class="btn btn-neutral float-left" title="teex.decisionRule package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="teex.saliencyMap.html" class="btn btn-neutral float-right" title="teex.saliencyMap package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Chus Antonanzas.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>